<h1> Map </h1>

<%= form_tag search_path, method: :get do %>
  <%= label :location, "Search reports near : " %>
  <%= text_field_tag :location, params[:location], :placeholder=>'Address' %>

  <%= label :distance, "Distance : " %>
  <%= select_tag :distance, options_for_select([["10 miles", 10], ["20 miles", 20], ["30 miles", 30], ["40 miles", 40], ["50 miles", 50], ["50+ miles", nil]], @prev_distance), :prompt=>"All" %> 

  <%= label :severity, "Severity: " %>
  <%= select_tag :severity, options_for_select([['Low'], ['Moderate'], ['Extreme']], @prev_severity) , :prompt=>'All'%>

  <%= label :status, "Status: " %>
  <%= select_tag :status, options_for_select([['Pending Review'], ['Under Investigation'], ['Closed']], @prev_status) , :prompt=>'All'%>

  <%= submit_tag "Search" %>
<% end %>

    
<% if @reports.size == 0 %>
  <h4> No reports found </h4>
  <small> Please check your search parameters </small>
<% else %>
  <table class="table table-hover">
    <tr>
      <th> Title </th>
      <th> Description </th>
      <th> Severity </th>
      <th> Location </th>
      <th> Status </th>
      <th> Created </th>
      <th> Last Updated </th>
      <th>  </th>
      <th>  </th>
    </tr>
    <% @reports.each do |report| %>
      <tr>
        <td><%= report.title %></td>
        <td><%=h truncate(report.description, :length => 100) %></td>
        <td><%= report.severity %>
        <td><%= report.full_address %></td>
        <td><%= report.status %>
        <td><%= report.created_at.strftime("%e %b %y %I:%M %p") %>
        <td><%= report.updated_at.strftime("%e %b %y %I:%M %p")%>
      </tr>
    <% end %>
  </table>
<% end %>
